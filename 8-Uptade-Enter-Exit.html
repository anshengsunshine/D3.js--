<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <title>8-Uptade-Enter-Exit</title>
    <style>
        .axis path,
        .axis line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }

        .axis text {
            font-family: sans-serif;
            font-size: 11px;
        }

        .MyText {
            font-size: 16px;
            color: rgb(255, 255, 255);
        }
    </style>
</head>

<body>
    <p></p>
    <p></p>
    <p></p>
    <script>
        /**
         * Update 和 Enter 的使用
         * 
         * 当对应的元素不足时 （ 绑定数据数量 > 对应元素 ），需要添加元素（append）。
         * 现在 body 中有三个 p 元素，要绑定一个长度大于 3 的数组到 p 的选择集上，
         * 然后分别处理 update 和 enter 两部分
         * 
         *  update 部分的处理办法一般是：更新属性值
         *  enter 部分的处理办法一般是：添加元素后，赋予属性值
        */
        var dataset = [3, 6, 9, 12, 15];
        //选择body中的p元素
        var p = d3.select("body").selectAll("p");
        //获取update部分
        var update = p.data(dataset);
        //获取enter部分
        var enter = update.enter();
        //update部分的处理：更新属性值
        update.text(function (d) {
            return "update " + d;
        });
        // enter部分的处理：添加元素后赋予属性值
        enter.append("p")
            .text(function (d) {
                return "enter " + d;
            });

        /**
         *  Update 和 Exit 的使用
         * 
         * 当对应的元素过多时 （ 绑定数据数量 < 对应元素 ），需要删掉多余的元素。
         * 现在 body 中有三个 p 元素，要绑定一个长度小于 3 的数组到 p 的选择集上，
         * 然后分别处理 update 和 exit 两部分。
         * 
         * exit 部分的处理办法一般是：删除元素（remove）
        */
        var dataset2 = [3]
        // 获取 body 中 p 元素
        var p = d3.select("body").selectAll("p")
        // 获取 update 部分
        var update = p.data(dataset2)
        // 获取 exit 部分
        var exit = update.exit()
        // update 部分的处理，更新属性值
        update.text(function (d) {
            return "update" + d
        })
        // exit 部分的处理，修改 p 元素的属性
        exit.text(function (d) {
            return "exit"
        })
        // exit部分的处理通常是删除元素
        // exit.remove()




    </script>
</body>

</html>